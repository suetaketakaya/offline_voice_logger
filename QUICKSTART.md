# OfflineVoiceLogger - クイックスタートガイド

## 🚀 すぐに試す

### 1. 環境準備 (5分)

```bash
# 1. 仮想環境の作成
python -m venv venv

# 2. 仮想環境のアクティベート
venv\Scripts\activate

# 3. 依存ライブラリのインストール
pip install -r requirements.txt
```

### 2. faster-whisperモデルの準備

モデルファイルが既に準備されているとのことですので、以下のディレクトリ構造になっているか確認してください:

```
OFFLINEVOICELOGGER/
├── models/
│   └── large-v3/       # ← ここにモデルファイルがある
│       ├── model.bin
│       ├── config.json
│       └── ...
```

**注**: モデルファイルのパスは実行時に自動検出されます。

### 3. アプリケーションの起動

```bash
cd src
python main.py
```

### 4. 初回起動時の設定

1. **音声デバイスの選択**
   - ドロップダウンから「ステレオミキサー」または「Stereo Mix」を選択
   - ループバックデバイスが表示されない場合は、Windowsの設定で有効化してください

2. **言語の選択**
   - 日本語または英語を選択

3. **保存先の設定**
   - 「参照」ボタンをクリックして保存先ディレクトリを選択
   - デフォルト: `C:\Users\[ユーザー名]\Documents\OfflineVoiceLogger`

### 5. 使い方

1. **録音開始**
   - 「● 録音開始」ボタンをクリック
   - 初回起動時はモデルのロードに10-30秒かかります
   - ステータスバーに「録音中」と表示されます

2. **文字起こし結果の確認**
   - リアルタイムで文字起こし結果が表示されます
   - 音声レベルメーターで入力レベルを確認できます

3. **録音停止**
   - 「■ 停止」ボタンをクリック

4. **結果の保存**
   - 「💾 保存」ボタンをクリック
   - TXT形式で保存されます

## ⚠️ トラブルシューティング

### 問題: "faster-whisperのインポートに失敗"

```bash
pip install faster-whisper
```

### 問題: "モデルファイルが見つかりません"

以下のいずれかを確認:

1. モデルファイルが `models/large-v3/` に配置されているか
2. ファイルパスに日本語が含まれていないか

**解決方法**:
```bash
# カレントディレクトリの確認
pwd

# モデルディレクトリの確認
ls models/large-v3/
```

### 問題: "音声デバイスが見つかりません"

**解決方法**:
1. Windowsの設定を開く
2. 「システム」→「サウンド」→「サウンドコントロールパネル」
3. 「録音」タブ
4. 空白部分を右クリック → 「無効なデバイスの表示」にチェック
5. 「ステレオミキサー」を右クリック → 「有効化」

### 問題: "sounddevice関連のエラー"

```bash
pip install sounddevice numpy
```

### 問題: "PyQt5関連のエラー"

```bash
pip install PyQt5
```

## 📊 動作確認チェックリスト

- [ ] アプリケーションが起動する
- [ ] デバイスリストが表示される
- [ ] ステレオミキサーが検出される
- [ ] 「録音開始」ボタンがクリックできる
- [ ] モデルロードが成功する (ステータスバーに表示)
- [ ] 音声レベルメーターが動作する
- [ ] 音声を再生すると文字起こし結果が表示される
- [ ] 「停止」ボタンで録音が停止する
- [ ] 「保存」ボタンでファイルが保存される
- [ ] 保存したファイルが開ける

## 🔍 ログの確認

問題が発生した場合は、ログファイルを確認してください:

```
%APPDATA%\OfflineVoiceLogger\logs\app.log
```

Windowsのエクスプローラーで以下のパスを開く:
```
C:\Users\[ユーザー名]\AppData\Roaming\OfflineVoiceLogger\logs\
```

## 💡 ヒント

### テスト方法

1. **YouTubeやブラウザで音声を再生**
   - YouTubeで日本語または英語の動画を再生
   - OfflineVoiceLoggerで録音開始
   - リアルタイムで文字起こしされるのを確認

2. **音声レベルの確認**
   - 音声レベルメーターが反応しているか確認
   - 反応しない場合はデバイス選択を確認

3. **処理速度の確認**
   - 初回は10秒のバッファが溜まるまで待機
   - その後、faster-whisperで処理 (large-v3は遅延あり)

### パフォーマンス

- **CPU使用率**: 50-70% (通常)
- **メモリ使用量**: 6-8GB (large-v3使用時)
- **遅延**: 15-25秒 (バッファ10秒 + 処理時間)

### より速く動作させたい場合

`src/config_manager.py`のデフォルト設定で:
- モデルを`medium`に変更 (精度は下がるが高速化)
- バッファサイズを5秒に変更 (遅延は減るが頻繁に処理)

## 📝 次のステップ

Phase 1の動作確認が完了したら:

1. **EXE化** - PyInstallerでスタンドアロンEXEを作成
2. **Phase 2** - 追加機能の実装 (メニューバー、自動保存など)
3. **MSIインストーラー** - 配布用インストーラーの作成

---

**問題が解決しない場合は、ログファイルを確認するか、`IMPLEMENTATION_GUIDE.md`を参照してください。**
